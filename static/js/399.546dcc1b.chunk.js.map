{"version":3,"file":"static/js/399.546dcc1b.chunk.js","mappings":"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","sources":["Services/Movies-api.js","webpack://react-homework-template/./src/Views/MovieDetailsPage/MovieDetailsPage.module.css?e987","Views/MovieDetailsPage/MovieDetailsPage.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst KEY = 'd3cefc83be12e2f78adc124a4a97fa4a';\r\nconst BASE_URL = 'https://api.themoviedb.org/3/';\r\n\r\nexport async function getTrending() {\r\n  try {\r\n    const request = await axios.get(\r\n      `${BASE_URL}trending/movie/day?api_key=${KEY}`\r\n    );\r\n\r\n    const clearRequest = request.data.results.map(e => {\r\n      return {\r\n        id: e.id,\r\n        movieName: e.original_title,\r\n      };\r\n    });\r\n    return clearRequest;\r\n  } catch (error) {\r\n    console.error(error);\r\n  }\r\n}\r\nexport async function searchMovies(query) {\r\n  try {\r\n    const request = await axios.get(\r\n      `${BASE_URL}search/movie?api_key=${KEY}&language=en-US&query=${query}&page=1&include_adult=true`\r\n    );\r\n    const clearRequest = request.data.results.map(e => {\r\n      return {\r\n        id: e.id,\r\n        movieName: e.original_title,\r\n      };\r\n    });\r\n    return clearRequest;\r\n  } catch (error) {\r\n    console.error(error);\r\n  }\r\n}\r\n\r\nexport async function getMmovieDetails(movieId) {\r\n  try {\r\n    const request = await axios.get(\r\n      `${BASE_URL}movie/${movieId}?api_key=${KEY}&language=en-US`\r\n    );\r\n    const clearRequest = [request.data].map(e => {\r\n      return {\r\n        poster: `https://image.tmdb.org/t/p/w500/${e.poster_path}`,\r\n        tag: e.tagline,\r\n        movieName: e.original_title,\r\n        userScore: e.vote_average * 10,\r\n        overview: e.overview,\r\n        genres: e.genres.map(el => el.name),\r\n      };\r\n    });\r\n    return clearRequest;\r\n  } catch (error) {\r\n    console.error(error);\r\n  }\r\n}\r\n\r\nexport async function getMovieCredits(movieId) {\r\n  try {\r\n    const request = await axios.get(\r\n      `${BASE_URL}movie/${movieId}/credits?api_key=${KEY}&language=en-US`\r\n    );\r\n\r\n    const clearRequest = request.data.cast.map(e => {\r\n      return {\r\n        castId: e.cast_id,\r\n        name: e.original_name,\r\n        character: e.character,\r\n        photo: `https://image.tmdb.org/t/p/w500/${e.profile_path}`,\r\n      };\r\n    });\r\n    return clearRequest;\r\n  } catch (error) {\r\n    console.error(error);\r\n  }\r\n}\r\n\r\nexport async function getMovieReviews(movieId) {\r\n  try {\r\n    const request = await axios.get(\r\n      `${BASE_URL}movie/${movieId}/reviews?api_key=${KEY}&language=en-US&page=1`\r\n    );\r\n    const clearRequest = request.data.results.map(e => {\r\n      return {\r\n        revId: e.id,\r\n        author: e.author,\r\n        review: e.content,\r\n      };\r\n    });\r\n    return clearRequest;\r\n  } catch (error) {\r\n    console.error(error);\r\n  }\r\n}\r\n","// extracted by mini-css-extract-plugin\nexport default {\"links\":\"MovieDetailsPage_links__5A1-U\",\"link\":\"MovieDetailsPage_link__awiXu\",\"image\":\"MovieDetailsPage_image__1f1dx\",\"mainBlock\":\"MovieDetailsPage_mainBlock__al8mn\",\"goBack\":\"MovieDetailsPage_goBack__rpJRq\"};","import { useState, useEffect, lazy, Suspense } from 'react';\r\nimport {\r\n  NavLink,\r\n  Route,\r\n  Routes,\r\n  useParams,\r\n  useLocation,\r\n  Link,\r\n} from 'react-router-dom';\r\nimport * as getMmovieDetailsAPI from 'Services/Movies-api';\r\nimport s from './MovieDetailsPage.module.css';\r\nconst Cast = lazy(() => import('Views/Cast'));\r\nconst Reviews = lazy(() => import('Views/Reviews'));\r\n\r\nexport default function MovieDetailsPage() {\r\n  const { movieId } = useParams();\r\n  const [movie, setMovie] = useState(null);\r\n\r\n  const location = useLocation();\r\n  const queryParam = new URLSearchParams(location.search);\r\n  console.log('details', location);\r\n\r\n  useEffect(() => {\r\n    getMmovieDetailsAPI.getMmovieDetails(movieId).then(setMovie);\r\n  }, [movieId]);\r\n\r\n  const searchPar = queryParam.get('search') ?? '';\r\n\r\n  return (\r\n    <div>\r\n      <Link\r\n        to={searchPar ? `/movies?search=${searchPar}` : '/'}\r\n        className={s.goBack}\r\n      >\r\n        <>&#8592; Go back</>\r\n      </Link>\r\n      {movie && (\r\n        <div className={s.mainBlock}>\r\n          <img src={movie[0].poster} alt={movie[0].tag} className={s.image} />\r\n          <div className={s.textBlock}>\r\n            <h2>{movie[0].movieName}</h2>\r\n            <p>User score: {movie[0].userScore}</p>\r\n            <h3>Overview</h3>\r\n            <p>{movie[0].overview}</p>\r\n            <h3>Genres</h3>\r\n            <p>{movie[0].genres.join(' ')}</p>\r\n          </div>\r\n        </div>\r\n      )}\r\n      <hr />\r\n      <h4>Additional information</h4>\r\n      <div>\r\n        <ul className={s.links}>\r\n          <li className={s.link}>\r\n            <NavLink to={`cast?search=${searchPar}`}>Cast</NavLink>\r\n          </li>\r\n          <li className={s.link}>\r\n            <NavLink to={`reviews?search=${searchPar}`}>Reviews</NavLink>\r\n          </li>\r\n        </ul>\r\n        <Routes>\r\n          <Route\r\n            path=\"cast\"\r\n            element={\r\n              <Suspense fallback={<div>Loading...</div>}>\r\n                <Cast movieId={movieId} />\r\n              </Suspense>\r\n            }\r\n          />\r\n          <Route\r\n            path=\"reviews\"\r\n            element={\r\n              <Suspense fallback={<div>Loading...</div>}>\r\n                <Reviews movieId={movieId} />\r\n              </Suspense>\r\n            }\r\n          />\r\n        </Routes>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["KEY","BASE_URL","getTrending","axios","request","clearRequest","data","results","map","e","id","movieName","original_title","console","error","searchMovies","query","getMmovieDetails","movieId","poster","poster_path","tag","tagline","userScore","vote_average","overview","genres","el","name","getMovieCredits","cast","castId","cast_id","original_name","character","photo","profile_path","getMovieReviews","revId","author","review","content","Cast","lazy","Reviews","MovieDetailsPage","useParams","useState","movie","setMovie","location","useLocation","queryParam","URLSearchParams","search","log","useEffect","getMmovieDetailsAPI","then","searchPar","get","to","className","s","src","alt","join","path","element","Suspense","fallback"],"sourceRoot":""}